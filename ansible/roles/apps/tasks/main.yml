---
- name: create "volumes" directory
  file: path=/opt/volumes state=directory

- name: create "src" directory
  file: path=/opt/src state=directory

# ensure "src" and "volumes" are not in {{ apps }} as this would break our setup

- name: copy aplications' compose files
  copy:
    dest: /opt
    src: "{{ item }}"
  with_items: "{{ apps }}"

- name: run applications
  docker_service:
    project_src: /opt/{{ item }}
    pull: true
  with_items: "{{ apps }}"
